<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Google Overview - Lam Research Social Listening</title>
    <link rel="stylesheet" href="../css/main.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2/src/wordcloud2.min.js"></script>
</head>
<body class="bg-background font-inter">
    <!-- Logo at the top, acts as a back button -->
    <a href="dashboard_overview.html" style="text-decoration: none;">
      <div style="display: flex; align-items: center; margin-bottom: 12px; cursor: pointer;">
        <div style="width: 48px; height: 48px; background: #ff7300; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold;">Y</div>
        <span style="margin-left: 12px; color: #ff7300; font-size: 2rem; font-weight: bold;">Your logo</span>
      </div>
    </a>
    <div class="flex min-h-screen">
        <main id="mainContent" class="flex-1 ml-1/4 p-6 transition-all duration-300 ease-in-out">
            <!-- Filter Bar -->
            <div class="flex flex-wrap items-center justify-between gap-4 bg-surface rounded-lg shadow-card p-4 border border-border-light mb-6">
                <div class="flex items-center gap-4">
                    <span class="text-sm font-medium text-text-primary mr-2">Platform:</span>
                    <a href="dashboard_marketbeat.html" class="platform-btn" title="MarketBeat" aria-label="MarketBeat">
                      <img src="../public/marketbeat.png" alt="MarketBeat" style="width:40px; height:40px;">
                    </a>
                    <a href="dashboard_reddit.html" class="platform-btn" title="Reddit" aria-label="Reddit">
                      <img src="../public/reddit.png" alt="Reddit" style="width:40px; height:40px;">
                    </a>
                    <a href="dashboard_stocktwits.html" class="platform-btn" title="StockTwits" aria-label="StockTwits">
                      <img src="../public/stocktwits.png" alt="StockTwits" style="width:40px; height:40px;">
                    </a>
                    <a href="dashboard_x.html" class="platform-btn" title="X" aria-label="X">
                      <img src="../public/x.png" alt="X" style="width:40px; height:40px;">
                    </a>
                    <a href="dashboard_linkedin.html" class="platform-btn" title="LinkedIn" aria-label="LinkedIn">
                      <img src="../public/linkedin.png" alt="LinkedIn" style="width:40px; height:40px;">
                    </a>
                    <a href="dashboard_google.html" class="platform-btn" title="Google" aria-label="Google">
                      <img src="../public/google.png" alt="Google" style="width:40px; height:40px;">
                    </a>
                    <a href="dashboard_glassdoor.html" class="platform-btn" title="Glassdoor" aria-label="Glassdoor">
                      <img src="../public/glassdoor.png" alt="Glassdoor" style="width:40px; height:40px;">
                    </a>
                </div>
                <div class="flex items-center gap-2">
                    <span class="text-sm font-medium text-text-primary">Date Range:</span>
                    <select id="dateRangeSelect" class="appearance-none bg-surface border border-border rounded-md px-4 py-2 pr-8 text-sm font-medium text-text-primary focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-fast">
                        <option value="3months">Last 3 Months</option>
                        <option value="6months">Last 6 Months</option>
                        <option value="12months" selected>Last 12 Months</option>
                        <option value="2years">Last 2 Years</option>
                    </select>
                </div>
            </div>
            <!-- Summary Cards -->
            <div id="dashboardSummaryCards" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Total Volume Card -->
                <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-text-secondary">Total Volume</p>
                            <p class="text-2xl font-bold text-text-primary mt-1" id="total-volume">13,362</p>
                            <p class="text-sm text-error-600 mt-1">
                                <span class="inline-flex items-center">
                                    <svg class="w-4 h-4 text-error-600 mr-1" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M7 10l5 5 5-5z"/>
                                    </svg>
                                    <span class="font-bold">70%</span>
                                </span>
                                <span class="block">decreased by 70% from last year</span>
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-accent-100 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-accent-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        </div>
                    </div>
                </div>
                <!-- Engagement Rate Card -->
                <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-text-secondary">Engagement Rate</p>
                            <p class="text-2xl font-bold text-text-primary mt-1" id="engagement-rate">17.46</p>
                            <p class="text-sm text-text-secondary mt-1">Avg. engagements per post</p>
                        </div>
                        <div class="w-12 h-12 bg-accent-100 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-accent-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                        </div>
                    </div>
                </div>
                <!-- Brand Health Score Card -->
                <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-text-secondary">Brand Health Score</p>
                            <p class="text-2xl font-bold text-primary mt-1" id="brand-health-score">31/100</p>
                            <p class="text-sm text-text-secondary mt-1">Composite of sentiment, volume, and engagement</p>
                        </div>
                        <div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-primary-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Google Overview Title -->
            <h2 class="text-2xl font-bold mb-4">Google Overview</h2>
            <!-- Tab Bar -->
            <div class="flex gap-4 mb-8">
                <button id="showEngagement" class="flex-1 px-6 py-3 text-lg font-semibold text-white bg-primary rounded-md shadow">Engagement</button>
                <button id="showTrends" class="flex-1 px-6 py-3 text-lg font-semibold text-primary border-2 border-primary rounded-md shadow">Trends</button>
            </div>
            <div id="performanceView">
                <!-- Google Engagement Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Google Activity Radar -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <h3 class="text-lg font-semibold text-text-primary mb-6">Google Activity Radar</h3>
                        <div class="relative h-96 flex items-center justify-center">
                            <canvas id="googleRadarChart" width="400" height="384"></canvas>
                        </div>
                    </div>
                    <!-- User Activity Patterns -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <h3 class="text-lg font-semibold text-text-primary mb-6">Activity Patterns</h3>
                        <div class="space-y-6">
                            <div>
                                <h4 class="text-sm font-medium text-text-secondary mb-3">Peak Hours (EST)</h4>
                                <div id="googlePeakHours" class="grid grid-cols-4 gap-2 w-full">
                                    <!-- Peak hours will be loaded here by JS -->
                                </div>
                            </div>
                            <div>
                                <h4 class="text-sm font-medium text-text-secondary mb-3">Google Activity</h4>
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-text-primary">Total Searches</span>
                                        <span id="googleTotalSearches" class="text-sm font-medium text-text-primary">Loading...</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-text-primary">Total Mentions</span>
                                        <span id="googleTotalMentions" class="text-sm font-medium text-text-primary">Loading...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Google Yearly Sentiment Analysis -->
                <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light mt-8">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-text-primary">Yearly Sentiment Analysis</h3>
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-success-600 rounded-full"></div>
                                <span class="text-sm text-text-secondary">Positive</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-warning-500 rounded-full"></div>
                                <span class="text-sm text-text-secondary">Neutral</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-error-500 rounded-full"></div>
                                <span class="text-sm text-text-secondary">Negative</span>
                            </div>
                        </div>
                    </div>
                    <div class="relative h-96">
                        <canvas id="googleBarChart" width="800" height="384"></canvas>
                    </div>
                    <div class="mt-6 grid grid-cols-3 gap-4 text-center">
                        <div>
                            <p id="googlePositive" class="text-2xl font-bold text-success-600">...</p>
                            <p class="text-sm text-text-secondary">Positive Sentiment</p>
                        </div>
                        <div>
                            <p id="googleNeutral" class="text-2xl font-bold text-warning-500">...</p>
                            <p class="text-sm text-text-secondary">Neutral Sentiment</p>
                        </div>
                        <div>
                            <p id="googleNegative" class="text-2xl font-bold text-error-500">...</p>
                            <p class="text-sm text-text-secondary">Negative Sentiment</p>
                        </div>
                    </div>
                </div>
                <!-- Word Cloud Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8">
                    <!-- Positive Word Cloud -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <h3 class="text-lg font-semibold text-text-primary mb-6">Positive Sentiment Word Cloud</h3>
                        <div class="relative h-80 bg-white rounded-lg border border-border-light">
                            <canvas id="positiveWordCloud" width="500" height="320" class="w-full h-full"></canvas>
                        </div>
                        <div class="mt-4 text-center">
                            <p class="text-sm text-text-secondary">Most frequent words in positive reviews</p>
                            <p id="positiveWordCount" class="text-xs text-text-secondary mt-1">Loading...</p>
                        </div>
                    </div>
                    <!-- Negative Word Cloud -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <h3 class="text-lg font-semibold text-text-primary mb-6">Negative Sentiment Word Cloud</h3>
                        <div class="relative h-80 bg-white rounded-lg border border-border-light">
                            <canvas id="negativeWordCloud" width="500" height="320" class="w-full h-full"></canvas>
                        </div>
                        <div class="mt-4 text-center">
                            <p class="text-sm text-text-secondary">Most frequent words in negative reviews</p>
                            <p id="negativeWordCount" class="text-xs text-text-secondary mt-1">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="trendsView" class="hidden">
                <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light mb-8">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h2 class="text-xl font-semibold text-text-primary">Google Sentiment Trends Over Time</h2>
                            <p class="text-sm text-text-secondary mt-1">Google - Last 12 Months</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-success-600 rounded-full"></div>
                                <span class="text-sm text-text-secondary">Positive</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-warning-500 rounded-full"></div>
                                <span class="text-sm text-text-secondary">Neutral</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-error-500 rounded-full"></div>
                                <span class="text-sm text-text-secondary">Negative</span>
                            </div>
                        </div>
                    </div>
                    <div class="relative h-96 mb-8">
                        <canvas id="googleTrendsChart" class="w-full h-full"></canvas>
                    </div>
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light mb-8">
                        <h2 class="text-2xl font-bold text-text-primary mb-4">Key Insights & Patterns</h2>
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold text-text-primary mb-2">Trending Patterns</h3>
                            <ul class="space-y-2">
                                <li class="flex items-start space-x-2">
                                    <span class="inline-block w-3 h-3 rounded-full bg-green-500 mt-1"></span>
                                    <div>
                                        <span class="font-medium">Google search trends show stable positive sentiment</span><br/>
                                        <span class="text-text-secondary">Consistent growth in positive mentions across search results and trends.</span>
                                    </div>
                                </li>
                                <li class="flex items-start space-x-2">
                                    <span class="inline-block w-3 h-3 rounded-full bg-yellow-500 mt-1"></span>
                                    <div>
                                        <span class="font-medium">Search volume correlates with industry events</span><br/>
                                        <span class="text-text-secondary">Peaks in search activity align with product launches and earnings announcements.</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-text-primary mb-2">Strategic Recommendations</h3>
                            <ul class="space-y-2">
                                <li class="flex items-start space-x-2">
                                    <span class="inline-block w-3 h-3 rounded-full bg-orange-500 mt-1"></span>
                                    <div>
                                        <span class="font-medium">Optimize search presence during peak periods</span><br/>
                                        <span class="text-text-secondary">Enhance SEO strategies during high-volume search periods for maximum visibility.</span>
                                    </div>
                                </li>
                                <li class="flex items-start space-x-2">
                                    <span class="inline-block w-3 h-3 rounded-full bg-orange-500 mt-1"></span>
                                    <div>
                                        <span class="font-medium">Monitor search query sentiment trends</span><br/>
                                        <span class="text-text-secondary">Track emerging search patterns to anticipate market sentiment shifts.</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script>
    // Tab switching functionality
    const showEngagement = document.getElementById('showEngagement');
    const showTrends = document.getElementById('showTrends');
    const performanceView = document.getElementById('performanceView');
    const trendsView = document.getElementById('trendsView');
    
    if (showEngagement && showTrends && performanceView && trendsView) {
        showEngagement.onclick = function() {
            performanceView.classList.remove('hidden');
            trendsView.classList.add('hidden');
            showEngagement.classList.add('bg-primary', 'text-white');
            showEngagement.classList.remove('text-primary', 'border-2', 'border-primary');
            showTrends.classList.remove('bg-primary', 'text-white');
            showTrends.classList.add('text-primary', 'border-2', 'border-primary');
        };
        
        showTrends.onclick = function() {
            trendsView.classList.remove('hidden');
            performanceView.classList.add('hidden');
            showTrends.classList.add('bg-primary', 'text-white');
            showTrends.classList.remove('text-primary', 'border-2', 'border-primary');
            showEngagement.classList.remove('bg-primary', 'text-white');
            showEngagement.classList.add('text-primary', 'border-2', 'border-primary');
        };
        
        // Set Performance as default
        performanceView.classList.remove('hidden');
        trendsView.classList.add('hidden');
        showEngagement.classList.add('bg-primary', 'text-white');
        showEngagement.classList.remove('text-primary', 'border-2', 'border-primary');
        showTrends.classList.remove('bg-primary', 'text-white');
        showTrends.classList.add('text-primary', 'border-2', 'border-primary');
    }

    // Google Charts with Dummy Data
    let googleRadarChart = null;

    // Dummy data for Google activity radar
    const googleRadarData = {
        labels: ['Morning (6-9AM)', 'Workday (9AM-12PM)', 'Lunch (12-2PM)', 'Afternoon (2-5PM)', 'Evening (5-8PM)', 'Night (8-11PM)', 'Late Night (11PM-2AM)', 'Early Hours (2-6AM)'],
        data: [75, 120, 85, 95, 110, 65, 30, 15]
    };

    // Dummy data for peak hours
    const googlePeakHoursData = [
        { slot: '6-9AM', count: 75, level: 'Medium' },
        { slot: '9AM-12PM', count: 120, level: 'High' },
        { slot: '12-2PM', count: 85, level: 'Medium' },
        { slot: '2-5PM', count: 95, level: 'Medium' },
        { slot: '5-8PM', count: 110, level: 'High' },
        { slot: '8-11PM', count: 65, level: 'Low' },
        { slot: '11PM-2AM', count: 30, level: 'Low' },
        { slot: '2-6AM', count: 15, level: 'Low' }
    ];

    // Dummy data for yearly sentiment
    const googleYearlyData = {
        years: ['2021', '2022', '2023', '2024'],
        positive: [45.2, 52.1, 48.7, 51.3],
        neutral: [35.8, 32.4, 36.2, 33.9],
        negative: [19.0, 15.5, 15.1, 14.8]
    };

    function loadGoogleRadarChart() {
        const ctx = document.getElementById('googleRadarChart');
        if (!ctx) return;
        
        // Destroy previous chart if exists
        if (googleRadarChart) googleRadarChart.destroy();
        
        googleRadarChart = new Chart(ctx.getContext('2d'), {
            type: 'radar',
            data: {
                labels: googleRadarData.labels,
                datasets: [{
                    label: 'Search Activity by Time',
                    data: googleRadarData.data,
                    fill: true,
                    backgroundColor: 'rgba(74, 144, 226, 0.2)',
                    borderColor: '#4A90E2',
                    pointBackgroundColor: '#FF6B35',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#FF6B35',
                    borderWidth: 3,
                    pointRadius: 6,
                    pointHoverRadius: 9
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            color: '#374151',
                            font: { size: 16, weight: 'bold' }
                        }
                    }
                }
            }
        });
    }

    function loadGooglePeakHours() {
        const container = document.getElementById('googlePeakHours');
        if (!container) return;
        
        container.innerHTML = '';
        
        // Find max count for highlighting
        let maxCount = Math.max(...googlePeakHoursData.map(slot => slot.count));
        
        googlePeakHoursData.forEach(slot => {
            let bg = slot.count === maxCount ? 'bg-primary-50' : 'bg-secondary-50';
            let text = slot.count === maxCount ? 'text-primary' : 'text-text-primary';
            let level = slot.count === maxCount ? 'High' : (slot.count > 50 ? 'Medium' : 'Low');
            
            container.innerHTML += `
                <div class="text-center p-2 ${bg} rounded">
                    <p class="text-sm font-medium ${text}">${slot.slot}</p>
                    <p class="text-xs text-text-secondary">${level} (${slot.count})</p>
                </div>
            `;
        });
    }

    function loadGoogleActivityStats() {
        document.getElementById('googleTotalSearches').textContent = '24,750';
        document.getElementById('googleTotalMentions').textContent = '15,420';
    }

    function initializeGoogleBarChart() {
        const ctx = document.getElementById('googleBarChart');
        if (!ctx) return;

        new Chart(ctx.getContext('2d'), {
            type: 'bar',
            data: {
                labels: googleYearlyData.years,
                datasets: [
                    {
                        label: 'Positive',
                        data: googleYearlyData.positive,
                        backgroundColor: '#27AE60',
                        borderRadius: 4
                    },
                    {
                        label: 'Neutral',
                        data: googleYearlyData.neutral,
                        backgroundColor: '#F39C12',
                        borderRadius: 4
                    },
                    {
                        label: 'Negative',
                        data: googleYearlyData.negative,
                        backgroundColor: '#E74C3C',
                        borderRadius: 4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 20
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false },
                        ticks: { font: { size: 12 } }
                    },
                    y: {
                        beginAtZero: true,
                        grid: { color: '#F3F4F6' },
                        ticks: { 
                            font: { size: 12 },
                            callback: function(value) { return value + '%'; }
                        },
                        max: 60
                    }
                }
            }
        });

        // Set the latest year's sentiment values
        const lastIdx = googleYearlyData.years.length - 1;
        const pos = googleYearlyData.positive[lastIdx];
        const neu = googleYearlyData.neutral[lastIdx];
        const neg = googleYearlyData.negative[lastIdx];
        
        document.getElementById('googlePositive').textContent = pos.toFixed(1) + '%';
        document.getElementById('googleNeutral').textContent = neu.toFixed(1) + '%';
        document.getElementById('googleNegative').textContent = neg.toFixed(1) + '%';
    }

    // Initialize charts when page loads
    document.addEventListener('DOMContentLoaded', function() {
        if (document.getElementById('performanceView')) {
            loadGoogleRadarChart();
            loadGooglePeakHours();
            loadGoogleActivityStats();
            initializeGoogleBarChart();
            loadGoogleWordClouds();
        }
        // Initialize trends chart
        initializeGoogleTrendsChart();
    });

    // Word Cloud Functions
    async function loadGoogleWordClouds() {
        await loadPositiveWordCloud();
        await loadNegativeWordCloud();
    }

    async function loadPositiveWordCloud() {
        try {
            const response = await fetch('../public/google_positive_wordcloud.json');
            if (!response.ok) throw new Error('Failed to load positive wordcloud data');
            const data = await response.json();
            
            const canvas = document.getElementById('positiveWordCloud');
            if (!canvas) return;

            // Prepare word cloud data
            const wordList = data.words.map(word => [word.text, word.size]);
            
            // Clear canvas
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Create word cloud
            WordCloud(canvas, {
                list: wordList,
                gridSize: Math.round(12 * canvas.width / 1024),
                weightFactor: function (size) {
                    return Math.pow(size, 1.0) * canvas.width / 512;
                },
                fontFamily: 'Inter, system-ui, -apple-system, sans-serif',
                fontWeight: '600',
                color: function () {
                    // Green color variations for positive sentiment
                    const colors = ['#27AE60', '#2ECC71', '#16A085', '#48C9B0', '#52C41A'];
                    return colors[Math.floor(Math.random() * colors.length)];
                },
                rotateRatio: 0.2,
                backgroundColor: '#ffffff',
                minSize: 8,
                drawOutOfBound: false,
                shrinkToFit: true
            });

            // Update stats
            document.getElementById('positiveWordCount').textContent = 
                `${data.total_reviews} reviews • ${data.total_words} words • Top ${data.words.length} displayed`;

        } catch (error) {
            console.error('Error loading positive word cloud:', error);
            const canvas = document.getElementById('positiveWordCloud');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#6B7280';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Error loading word cloud', canvas.width/2, canvas.height/2);
            }
        }
    }

    async function loadNegativeWordCloud() {
        try {
            const response = await fetch('../public/google_negative_wordcloud_data.json');
            if (!response.ok) throw new Error('Failed to load negative wordcloud data');
            const data = await response.json();
            
            const canvas = document.getElementById('negativeWordCloud');
            if (!canvas) return;

            // Prepare word cloud data
            const wordList = data.words.map(word => [word.text, word.size]);
            
            // Clear canvas
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Create word cloud
            WordCloud(canvas, {
                list: wordList,
                gridSize: Math.round(12 * canvas.width / 1024),
                weightFactor: function (size) {
                    return Math.pow(size, 1.0) * canvas.width / 512;
                },
                fontFamily: 'Inter, system-ui, -apple-system, sans-serif',
                fontWeight: '600',
                color: function () {
                    // Red color variations for negative sentiment
                    const colors = ['#E74C3C', '#DC3545', '#C0392B', '#E55353', '#FF4757'];
                    return colors[Math.floor(Math.random() * colors.length)];
                },
                rotateRatio: 0.2,
                backgroundColor: '#ffffff',
                minSize: 8,
                drawOutOfBound: false,
                shrinkToFit: true
            });

            // Update stats
            document.getElementById('negativeWordCount').textContent = 
                `${data.total_reviews} reviews • ${data.total_words} words • Top ${data.words.length} displayed`;

        } catch (error) {
            console.error('Error loading negative word cloud:', error);
            const canvas = document.getElementById('negativeWordCloud');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#6B7280';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Error loading word cloud', canvas.width/2, canvas.height/2);
            }
        }
    }

    // Google Trends Line Chart with dummy data
    function initializeGoogleTrendsChart() {
        const ctx = document.getElementById('googleTrendsChart');
        if (!ctx) return;

        // Dummy monthly data for the last 12 months
        const googleTrendsData = {
            labels: ['Jan 2024', 'Feb 2024', 'Mar 2024', 'Apr 2024', 'May 2024', 'Jun 2024', 
                    'Jul 2024', 'Aug 2024', 'Sep 2024', 'Oct 2024', 'Nov 2024', 'Dec 2024'],
            positive: [48.5, 51.2, 49.8, 52.1, 50.4, 53.2, 51.8, 49.6, 52.5, 50.9, 53.1, 51.3],
            neutral: [35.2, 33.8, 36.1, 32.4, 34.7, 31.9, 33.5, 35.8, 32.1, 34.3, 31.7, 33.9],
            negative: [16.3, 15.0, 14.1, 15.5, 14.9, 14.9, 14.7, 14.6, 15.4, 14.8, 15.2, 14.8]
        };

        new Chart(ctx.getContext('2d'), {
            type: 'line',
            data: {
                labels: googleTrendsData.labels,
                datasets: [
                    {
                        label: 'Positive',
                        data: googleTrendsData.positive,
                        borderColor: '#27AE60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#27AE60',
                        pointBorderColor: '#FFFFFF',
                        pointBorderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'Neutral',
                        data: googleTrendsData.neutral,
                        borderColor: '#F39C12',
                        backgroundColor: 'rgba(243, 156, 18, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#F39C12',
                        pointBorderColor: '#FFFFFF',
                        pointBorderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'Negative',
                        data: googleTrendsData.negative,
                        borderColor: '#E74C3C',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#E74C3C',
                        pointBorderColor: '#FFFFFF',
                        pointBorderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    intersect: false,
                    mode: 'index'
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(255, 255, 255, 0.95)',
                        titleColor: '#2C3E50',
                        bodyColor: '#2C3E50',
                        borderColor: '#E1E8ED',
                        borderWidth: 1,
                        cornerRadius: 8,
                        displayColors: true,
                        callbacks: {
                            label: function(context) {
                                return `${context.dataset.label}: ${context.parsed.y}%`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: true,
                            color: '#F3F4F6'
                        },
                        ticks: {
                            color: '#7F8C8D',
                            font: {
                                size: 12
                            }
                        }
                    },
                    y: {
                        beginAtZero: true,
                        max: 60,
                        grid: {
                            display: true,
                            color: '#F3F4F6'
                        },
                        ticks: {
                            color: '#7F8C8D',
                            font: {
                                size: 12
                            },
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                },
                elements: {
                    point: {
                        hoverBackgroundColor: '#FFFFFF'
                    }
                }
            }
        });
    }
    </script>
</body>
</html> 