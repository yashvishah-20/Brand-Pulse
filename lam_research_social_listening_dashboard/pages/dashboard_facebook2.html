<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W6KKRSGJ');</script>
<!-- End Google Tag Manager -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Facebook Overview - Prowess Social Listening</title>
    <link rel="stylesheet" href="../css/main.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-background font-inter">
    <style>
      .hidden { display: none !important; }
    </style>
    
    <!-- Hover Trigger Zone for Sidebar -->
    <div id="sidebarTrigger" class="fixed left-0 top-0 w-4 h-full z-50 opacity-0 pointer-events-auto"></div>
    
    <!-- Main Container -->
    <div class="flex min-h-screen">
        <!-- Left Sidebar -->
        <aside id="sidebar" class="w-1/4 bg-surface shadow-card border-r border-border-light fixed h-full overflow-y-auto z-40 transition-all duration-300 ease-in-out" style="transform: translateX(-100%);">
            <!-- Logo Section -->
            <div class="p-6 border-b border-border-light">
                <a href="dashboard_overview.html" style="text-decoration: none;">
                  <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 12px; cursor: pointer;">
                    <img src="../../prowess logo.png" alt="Prowess Logo" style="width: 200px; height: 100px; object-fit: contain;">
                  </div>
                </a>
            </div>

            <!-- Navigation Menu -->
            <nav class="p-4">
                <!-- Your Company Section -->
                <div class="mb-6">
                    <h3 class="text-sm font-medium text-text-secondary uppercase tracking-wide mb-3">Your Company</h3>
                    <ul class="space-y-1">
                        <li>
                            <a href="dashboard_overview.html" class="flex items-center px-3 py-2 text-sm font-medium text-text-secondary hover:text-text-primary hover:bg-secondary-50 rounded-md transition-fast">
                                <svg class="w-4 h-4 mr-3" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                                </svg>
                                Sentiment
                            </a>
                        </li>
                        <li>
                            <a href="dashboard_facebook2.html" class="flex items-center px-3 py-2 text-sm font-medium text-primary bg-primary-50 rounded-md transition-fast">
                                <svg class="w-4 h-4 mr-3" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                                Engagement
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Competitors Company Section -->
                <div>
                    <h3 class="text-sm font-medium text-text-secondary uppercase tracking-wide mb-3">Competitors Company</h3>
                    <ul class="space-y-1">
                        <li>
                            <a href="competitor_analysis.html" class="flex items-center px-3 py-2 text-sm font-medium text-text-secondary hover:text-text-primary hover:bg-secondary-50 rounded-md transition-fast">
                                <svg class="w-4 h-4 mr-3" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M9 11H7v9h2v-9zm4 0h-2v9h2v-9zm4 0h-2v9h2v-9zm2.5-5H18V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v2H4.5c-.83 0-1.5.67-1.5 1.5S3.67 9 4.5 9H6v10c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9h1.5c.83 0 1.5-.67 1.5-1.5S20.33 6 19.5 6zM10 4h4v2h-4V4z"/>
                                </svg>
                                Competitor Analysis
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main id="mainContent" class="flex-1 ml-1/4 p-6 transition-all duration-300 ease-in-out">
            <!-- Header Section with Logo and Date Filter -->
            <div class="flex items-center justify-between mb-6">
                <!-- Left side - Logo -->
                <div class="flex items-center">
                    <a href="dashboard_overview.html" style="text-decoration: none;">
                        <div style="display: flex; align-items: center; cursor: pointer;">
                            <img src="../../prowess logo.png" alt="Prowess Logo" style="width: 200px; height: 100px; object-fit: contain;">
                        </div>
                    </a>
                </div>
                
                <!-- Right side - Date Filter -->
                <div class="flex items-center space-x-4">
                    <!-- Date Range Filter -->
                    <div class="flex items-center space-x-3 bg-surface rounded-lg shadow-card p-3 border border-border-light">
                        <div class="flex items-center space-x-2">
                            <label class="text-sm font-medium text-text-secondary">FROM:</label>
                            <input type="date" id="dateFrom" class="px-3 py-2 text-sm border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white" value="2024-01-01">
                        </div>
                        <div class="text-text-secondary">—</div>
                        <div class="flex items-center space-x-2">
                            <label class="text-sm font-medium text-text-secondary">TO:</label>
                            <input type="date" id="dateTo" class="px-3 py-2 text-sm border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white" value="2024-12-31">
                        </div>
                        <button id="applyDateFilter" class="px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:bg-primary-600 transition-fast flex items-center">
                            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                            Apply
                        </button>
                    </div>
                    <!-- Export Report Button -->
                    <a href="../public/competitor_analysis_data.zip" download class="px-4 py-2 text-sm font-medium text-text-secondary bg-surface border border-border rounded-md hover:bg-secondary-50 transition-fast flex items-center">
                        <svg class="w-4 h-4 inline mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M5 20h14v-2H5v2zm7-18v12m0 0l-4-4m4 4l4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                        </svg>
                        Export Report
                    </a>
                </div>
            </div>
            <!-- Filter Bar -->
            <div class="flex flex-wrap items-center justify-between gap-4 bg-surface rounded-lg shadow-card p-4 border border-border-light mb-6">
                <!-- Facebook -->
                <a href="dashboard_facebook2.html" class="platform-btn" title="Facebook" aria-label="Facebook">
                    <img src="../public/facebook.png" alt="Facebook" style="width:40px; height:40px;">
                </a>
                <!-- X -->
                <a href="dashboard_x2.html" class="platform-btn" title="X" aria-label="X">
                    <img src="../public/x.png" alt="X" style="width:40px; height:40px;">
                </a>
                <!-- Instagram -->
                <a href="dashboard_instagram2.html" class="platform-btn" title="Instagram" aria-label="Instagram">
                    <img src="../public/instagram.png" alt="Instagram" style="width:40px; height:40px;">
                </a>
                <!-- Reddit -->
                <a href="dashboard_reddit2.html" class="platform-btn" title="Reddit" aria-label="Reddit">
                    <img src="../public/reddit.png" alt="Reddit" style="width:40px; height:40px;">
                </a>
                <!-- LinkedIn -->
                <a href="dashboard_linkedin2.html" class="platform-btn" title="LinkedIn" aria-label="LinkedIn">
                    <img src="../public/linkedin.png" alt="LinkedIn" style="width:40px; height:40px;">
                </a>
            </div>
            <!-- Facebook Platform Analysis Title -->
                <!-- Facebook header removed per request -->

            <!-- Platform Performance Metrics -->
            <div class="flex flex-row gap-2 mb-8" style="flex-wrap: nowrap;">
                <!-- Reach & Visibility -->
                <div class="flex-1 bg-surface rounded-lg shadow-card p-3 border border-border-light transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5" style="flex: 1 1 20%; min-width: 0;">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs font-medium text-text-secondary">Reach & Visibility</p>
                            <p id="reachValue" class="text-lg font-bold text-text-primary mt-1">1.8M</p>
                            <div class="mt-1">
                                <span id="reachChange" class="inline-flex items-center text-xs font-medium text-green-600">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                    +9.1% vs last month
                                </span>
                            </div>
                        </div>
                        <div class="w-8 h-8 bg-accent-100 rounded-lg flex items-center justify-center">
                            <svg class="w-4 h-4 text-accent-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Content Performance -->
                <div class="flex-1 bg-surface rounded-lg shadow-card p-3 border border-border-light transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5" style="flex: 1 1 20%; min-width: 0;">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs font-medium text-text-secondary">Engagement Rate (Avg.)</p>
                            <p id="performanceValue" class="text-lg font-bold text-text-primary mt-1">6.2%</p>
                            <div class="mt-1">
                                <span id="engagementChange" class="inline-flex items-center text-xs font-medium text-green-600">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                    +1.3% vs last month
                                </span>
                            </div>
                        </div>
                        <div class="w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center">
                            <svg class="w-4 h-4 text-success-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Audience Quality -->
                <div class="flex-1 bg-surface rounded-lg shadow-card p-3 border border-border-light transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5" style="flex: 1 1 20%; min-width: 0;">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs font-medium text-text-secondary">Total Followers</p>
                            <p id="followersValue" class="text-lg font-bold text-text-primary mt-1">158.3K</p>
                            <div class="flex items-center mt-1">
                              
                                <span id="followersChange" class="ml-2 text-xs font-medium text-red-600 flex items-center">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 10.293a1 1 0 00-1.414 0L11 14.586V3a1 1 0 10-2 0v11.586l-4.293-4.293a1 1 0 00-1.414 1.414l6 6a1 1 0 001.414 0l6-6a1 1 0 000-1.414z" clip-rule="evenodd"/>
                                    </svg>
                                    -12.5% vs last month
                                </span>
                            </div>
                        </div>
                        <div class="w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center">
                            <svg class="w-4 h-4 text-warning-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Company Followers -->
                <div class="flex-1 bg-surface rounded-lg shadow-card p-3 border border-border-light transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5" style="flex: 1 1 20%; min-width: 0;">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs font-medium text-text-secondary">Page Likes</p>
                            <p id="likesValue" class="text-lg font-bold text-text-primary mt-1">142.1K</p>
                            <div class="flex items-center mt-1">
                              
                                <span id="likesChange" class="ml-2 text-xs font-medium text-green-600 flex items-center">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                    +15.3% vs last month
                                </span>
                            </div>
                        </div>
                        <div class="w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center">
                            <svg class="w-4 h-4 text-success-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                        </div>
                    </div>
                </div>
                <!-- Page Shares (new) -->
                <div class="flex-1 bg-surface rounded-lg shadow-card p-3 border border-border-light transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5" style="flex: 1 1 20%; min-width: 0;">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <h4 class="text-xs font-medium text-text-secondary mb-1">Page Shares</h4>
                            <p id="sharesValue" class="text-lg font-bold text-text-primary mb-2">12.4K</p>
                            <div class="flex items-center">
                                <span id="sharesChange" class="ml-2 text-xs font-medium text-green-600 inline-flex items-center">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M13 7h-2V3H9v4H7l3 4 3-4zM5 17h10v-2H5v2z"/>
                                    </svg>
                                    +8.7% vs last month
                                </span>
                            </div>
                        </div>
                        <div class="w-8 h-8 bg-accent-50 rounded-lg flex items-center justify-center">
                            <svg class="w-4 h-4 text-accent-600" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <polyline points="16 6 12 2 8 6"></polyline>
                                <path d="M12 2v13"></path>
                                <path d="M21 15v6H3v-6"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
    
            <div id="performanceView" style="display: block;">

                <!-- CONTENT PERFORMANCE ANALYTICS -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- Content Performance Analysis -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light chart-container">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary">Content Performance Analytics</h3>
                                <p class="text-sm text-text-secondary mt-1">Engagement trends vs posting frequency</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-success-600 font-medium">↗ +15.3%</span>
                                <span class="text-xs text-text-secondary">vs last period</span>
                            </div>
                        </div>
                        <div class="relative h-64">
                            <canvas id="contentPerformanceChart" width="400" height="256"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                            <div class="bg-accent-50 rounded-lg p-3 insight-card">
                                <p class="text-lg font-bold text-accent-800">633</p>
                                <p class="text-xs text-text-secondary">Total Posts</p>
                            </div>
                            <div class="bg-success-50 rounded-lg p-3 insight-card">
                                <p class="text-lg font-bold text-success-800">2,926</p>
                                <p class="text-xs text-text-secondary">Total Engagements</p>
                            </div>
                        </div>
                    </div>

                    <!-- Audience Engagement Patterns -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light chart-container">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary">Audience Engagement Patterns</h3>
                                <p class="text-sm text-text-secondary mt-1">Optimal posting times analysis</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-primary rounded-full pulse-animation"></div>
                                <span class="text-sm text-text-secondary">Peak Activity</span>
                            </div>
                        </div>
                        <div class="relative h-64">
                            <canvas id="engagementPatternsChart" width="400" height="256"></canvas>
                        </div>
                        <div class="mt-4 text-center">
                            <p class="text-sm text-text-secondary">Best posting times: <span class="font-medium text-primary">9AM-11AM EST</span> and <span class="font-medium text-primary">2PM-4PM EST</span></p>
                        </div>
                    </div>
                </div>

                <!-- Section 5: Activity Patterns -->
                <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light mb-8">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h3 class="text-lg font-semibold text-text-primary">🕐 Facebook Activity Radar (by Month)</h3>
                            <p class="text-sm text-text-secondary mt-1">Monthly activity patterns and seasonality</p>
                        </div>
                        <div>
                            <select id="facebookRadarYearSelect" class="appearance-none bg-surface border border-border rounded-md px-4 py-2 pr-8 text-sm font-medium text-text-primary focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="all">All Years</option>
                            </select>
                        </div>
                    </div>
                    <div class="relative h-96 flex items-center justify-center">
                        <canvas id="facebookActivityRadarChart" width="400" height="384"></canvas>
                    </div>
                </div>

                <!-- Section 4: Audience & Demographics -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- Audience Demographics Chart -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary">👥 Audience Demographics</h3>
                                <p class="text-sm text-text-secondary mt-1">Age and demographic breakdown</p>
                            </div>
                        </div>
                        <div class="relative h-96">
                            <canvas id="facebookDemographicsChart" width="400" height="384"></canvas>
                        </div>
                    </div>

                    <!-- Top Posts Performance -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary">🏆 Top Performing Posts</h3>
                                <p class="text-sm text-text-secondary mt-1">Best content by engagement</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-3 bg-primary-50 rounded-lg">
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-text-primary">Product Launch Announcement</p>
                                    <p class="text-xs text-text-secondary mt-1">2 days ago • Video</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-primary">1.2K</p>
                                    <p class="text-xs text-text-secondary">Engagements</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-secondary-50 rounded-lg">
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-text-primary">Company Culture Video</p>
                                    <p class="text-xs text-text-secondary mt-1">5 days ago • Video</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-primary">890</p>
                                    <p class="text-xs text-text-secondary">Engagements</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-accent-50 rounded-lg">
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-text-primary">Industry News Share</p>
                                    <p class="text-xs text-text-secondary mt-1">1 week ago • Link</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-primary">654</p>
                                    <p class="text-xs text-text-secondary">Engagements</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-text-primary">Technology Innovation Post</p>
                                    <p class="text-xs text-text-secondary mt-1">2 weeks ago • Image</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-primary">523</p>
                                    <p class="text-xs text-text-secondary">Engagements</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Platform Performance Analysis -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- Posting Frequency Analysis -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-text-primary">Posting Frequency Analysis</h3>
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                    <span class="text-sm text-text-secondary">Daily Posts</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <span class="text-sm text-text-secondary">Engagement Rate</span>
                                </div>
                            </div>
                        </div>
                        <div class="relative h-80">
                            <canvas id="facebookPostingFrequencyChart" width="400" height="320"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-3 gap-4 text-center">
                            <div class="bg-blue-50 rounded-lg p-3">
                                <p class="text-lg font-bold text-blue-800">2.3</p>
                                <p class="text-xs text-text-secondary">Avg Posts/Day</p>
                            </div>
                            <div class="bg-green-50 rounded-lg p-3">
                                <p class="text-lg font-bold text-green-800">4.8%</p>
                                <p class="text-xs text-text-secondary">Avg Engagement</p>
                            </div>
                            <div class="bg-purple-50 rounded-lg p-3">
                                <p class="text-lg font-bold text-purple-800">Wed</p>
                                <p class="text-xs text-text-secondary">Best Day</p>
                            </div>
                        </div>
                    </div>

                    <!-- Content Type Performance -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-text-primary">Content Type Performance</h3>
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                    <span class="text-sm text-text-secondary">Video</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <span class="text-sm text-text-secondary">Image</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                    <span class="text-sm text-text-secondary">Text</span>
                                </div>
                            </div>
                        </div>
                        <div class="relative h-80">
                            <canvas id="facebookContentTypeChart" width="400" height="320"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-3 gap-4 text-center">
                            <div class="bg-red-50 rounded-lg p-3">
                                <p class="text-lg font-bold text-red-800">7.2%</p>
                                <p class="text-xs text-text-secondary">Video Engagement</p>
                            </div>
                            <div class="bg-yellow-50 rounded-lg p-3">
                                <p class="text-lg font-bold text-yellow-800">4.1%</p>
                                <p class="text-xs text-text-secondary">Image Engagement</p>
                            </div>
                            <div class="bg-blue-50 rounded-lg p-3">
                                <p class="text-lg font-bold text-blue-800">2.8%</p>
                                <p class="text-xs text-text-secondary">Text Engagement</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Video Analysis Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- Video Performance Metrics -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary">📹 Video Performance Overview</h3>
                                <p class="text-sm text-text-secondary mt-1">Key video engagement metrics</p>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-primary">248</div>
                                <div class="text-sm text-text-secondary">Total Videos</div>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                                <div>
                                    <p class="text-sm font-medium text-text-primary">Total Views</p>
                                    <p class="text-xs text-text-secondary">Across all videos</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-blue-600">2.4M</p>
                                    <p class="text-xs text-success-600">↗ +18%</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                                <div>
                                    <p class="text-sm font-medium text-text-primary">Avg. Watch Time</p>
                                    <p class="text-xs text-text-secondary">Per video view</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-green-600">2:45</p>
                                    <p class="text-xs text-success-600">↗ +12%</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg">
                                <div>
                                    <p class="text-sm font-medium text-text-primary">Completion Rate</p>
                                    <p class="text-xs text-text-secondary">Videos watched fully</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-purple-600">68%</p>
                                    <p class="text-xs text-success-600">↗ +5%</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-orange-50 rounded-lg">
                                <div>
                                    <p class="text-sm font-medium text-text-primary">Video Shares</p>
                                    <p class="text-xs text-text-secondary">Total shares count</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-orange-600">1,249</p>
                                    <p class="text-xs text-success-600">↗ +22%</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Top Performing Video Types -->
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary">🏆 Top Video Categories</h3>
                                <p class="text-sm text-text-secondary mt-1">By engagement rate</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg border-l-4 border-blue-500">
                                <div>
                                    <p class="text-sm font-medium text-text-primary">Product Demos</p>
                                    <p class="text-xs text-text-secondary">42 videos</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-blue-600">8.9%</p>
                                    <p class="text-xs text-text-secondary">Engagement</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gradient-to-r from-green-50 to-green-100 rounded-lg border-l-4 border-green-500">
                                <div>
                                    <p class="text-sm font-medium text-text-primary">Behind Scenes</p>
                                    <p class="text-xs text-text-secondary">28 videos</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-green-600">7.2%</p>
                                    <p class="text-xs text-text-secondary">Engagement</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg border-l-4 border-purple-500">
                                <div>
                                    <p class="text-sm font-medium text-text-primary">Tutorials</p>
                                    <p class="text-xs text-text-secondary">35 videos</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-purple-600">6.8%</p>
                                    <p class="text-xs text-text-secondary">Engagement</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gradient-to-r from-orange-50 to-orange-100 rounded-lg border-l-4 border-orange-500">
                                <div>
                                    <p class="text-sm font-medium text-text-primary">Live Streams</p>
                                    <p class="text-xs text-text-secondary">18 videos</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-orange-600">5.4%</p>
                                    <p class="text-xs text-text-secondary">Engagement</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 7: Insights & Recommendations -->
                <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light mb-8">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h3 class="text-xl font-semibold text-text-primary">💡 Key Insights & Recommendations</h3>
                            <p class="text-sm text-text-secondary mt-1">AI-powered analysis and strategic recommendations</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                Updated Today
                            </span>
                        </div>
                    </div>
                    <div class="flex flex-col lg:flex-row gap-6">
                        <!-- Positive Insights -->
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 flex-1">
                            <div class="flex items-center mb-3">
                                <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-white text-sm">✓</span>
                                </div>
                                <h4 class="text-sm font-semibold text-green-800">Strong Performance</h4>
                            </div>
                            <ul class="text-sm text-green-700 space-y-1">
                                <li>• Video content shows 7.2% engagement</li>
                                <li>• Positive sentiment trending upward</li>
                                <li>• Peak activity time well-utilized</li>
                            </ul>
                        </div>

                        <!-- Areas for Improvement -->
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex-1">
                            <div class="flex items-center mb-3">
                                <div class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-white text-sm">!</span>
                                </div>
                                <h4 class="text-sm font-semibold text-yellow-800">Opportunities</h4>
                            </div>
                            <ul class="text-sm text-yellow-700 space-y-1">
                                <li>• Increase posting frequency</li>
                                <li>• Engage more with comments</li>
                                <li>• Optimize posting times</li>
                            </ul>
                        </div>

                        <!-- Strategic Recommendations -->
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 flex-1">
                            <div class="flex items-center mb-3">
                                <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-white text-sm">→</span>
                                </div>
                                <h4 class="text-sm font-semibold text-blue-800">Next Steps</h4>
                            </div>
                            <ul class="text-sm text-blue-700 space-y-1">
                                <li>• Focus on video content creation</li>
                                <li>• Expand audience targeting</li>
                                <li>• Monitor competitor strategies</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
            <div id="trendsView" class="hidden">
                <!-- Facebook Trends Summary Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-text-secondary">Trend Direction</p>
                                <p class="text-2xl font-bold text-success-600 mt-1">↗ Growing</p>
                            </div>
                            <div class="w-12 h-12 bg-success-100 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-success-600" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M7 14l5-5 5 5z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-text-secondary">Peak Engagement</p>
                                <p class="text-2xl font-bold text-text-primary mt-1">1.2K</p>
                                <p class="text-sm text-text-secondary mt-1">March 15, 2024</p>
                            </div>
                            <div class="w-12 h-12 bg-accent-100 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-accent-600" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-text-secondary">Avg Sentiment</p>
                                <p class="text-2xl font-bold text-text-primary mt-1">45.2%</p>
                                <p class="text-sm text-text-secondary mt-1">Positive overall</p>
                            </div>
                            <div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-primary-600" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-surface rounded-lg shadow-card p-6 border border-border-light">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-text-secondary">Growth Rate</p>
                                <p class="text-2xl font-bold text-success-600 mt-1">+15%</p>
                                <p class="text-sm text-text-secondary mt-1">vs last quarter</p>
                            </div>
                            <div class="w-12 h-12 bg-success-100 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-success-600" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Facebook Trends Chart -->
                <!-- (REMOVED: Sentiment Trends Over Time chart moved to Engagement tab) -->
            </div>
        </main>
    </div>
    
    <script>
        // Tab switching logic removed: Engagement is now always visible by default
        
        // Facebook Charts
        let facebookSentimentPieChart = null;
        let facebookBarChart = null;
        let facebookActivityRadarChart = null;
        let facebookActivityRadarRawData = null;
        let facebookEngagementChart = null;
        let facebookDemographicsChart = null;
        let facebookTrendsChart = null;
        let contentPerformanceChart = null;
        let engagementPatternsChart = null;
        
        // Initialize Facebook Sentiment Pie Chart
        function initializeFacebookSentimentPieChart() {
            const ctx = document.getElementById('facebookSentimentPieChart');
            if (!ctx) return;
            
            if (facebookSentimentPieChart) facebookSentimentPieChart.destroy();
            facebookSentimentPieChart = new Chart(ctx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['Positive', 'Neutral', 'Negative'],
                    datasets: [{
                        data: [45, 39, 16],
                        backgroundColor: [
                            '#27AE60', // Success green
                            '#F39C12', // Warning orange
                            '#E74C3C'  // Error red
                        ],
                        borderColor: [
                            '#ffffff',
                            '#ffffff', 
                            '#ffffff'
                        ],
                        borderWidth: 3,
                        cutout: '60%'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false // We have custom legend in HTML
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed + '%';
                                }
                            }
                        }
                    },
                    elements: {
                        arc: {
                            borderRadius: 4
                        }
                    },
                    animation: {
                        animateRotate: true,
                        animateScale: true,
                        duration: 1000
                    }
                }
            });
        }
        
        // Initialize Facebook Bar Chart
        function initializeFacebookBarChart() {
            const ctx = document.getElementById('facebookBarChart');
            if (!ctx) return;
            
            const years = ['2022', '2023', '2024'];
            const positiveData = [42.8, 44.1, 45.2];
            const neutralData = [41.2, 39.8, 38.7];
            const negativeData = [16.0, 16.1, 16.1];
            
            if (facebookBarChart) facebookBarChart.destroy();
            facebookBarChart = new Chart(ctx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: years,
                    datasets: [
                        { label: 'Positive', data: positiveData, backgroundColor: '#27AE60', borderRadius: 4 },
                        { label: 'Neutral', data: neutralData, backgroundColor: '#F39C12', borderRadius: 4 },
                        { label: 'Negative', data: negativeData, backgroundColor: '#E74C3C', borderRadius: 4 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top', labels: { usePointStyle: true, padding: 20 } }
                    },
                    scales: {
                        x: { grid: { display: false }, ticks: { font: { size: 12 } } },
                        y: {
                            beginAtZero: true,
                            grid: { color: '#F3F4F6' },
                            ticks: { font: { size: 12 }, callback: function(value) { return value + '%'; } },
                            max: 100
                        }
                    }
                }
            });
        }
        
        // Initialize Facebook Engagement Chart
        function initializeFacebookEngagementChart() {
            const ctx = document.getElementById('facebookEngagementChart');
            if (!ctx) return;
            
            const labels = ['Likes', 'Comments', 'Shares'];
            const data = [3200, 458, 234];
            const colors = ['#3498DB', '#27AE60', '#F39C12'];
            
            if (facebookEngagementChart) facebookEngagementChart.destroy();
            facebookEngagementChart = new Chart(ctx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Engagement Count',
                        data: data,
                        backgroundColor: colors,
                        borderColor: colors.map(color => color + 'CC'),
                        borderWidth: 2,
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { grid: { display: false }, ticks: { font: { size: 12 } } },
                        y: {
                            beginAtZero: true,
                            grid: { color: '#F3F4F6' },
                            ticks: { font: { size: 12 }, callback: function(value) { return value.toLocaleString(); } }
                        }
                    }
                }
            });
        }
        
        // Initialize Facebook Demographics Chart
        function initializeFacebookDemographicsChart() {
            const ctx = document.getElementById('facebookDemographicsChart');
            if (!ctx) return;
            
            const labels = ['18-24', '25-34', '35-44', '45-54', '55+'];
            const data = [15, 28, 35, 15, 7];
            const colors = ['#3498DB', '#27AE60', '#F39C12', '#E74C3C', '#9B59B6'];
            
            if (facebookDemographicsChart) facebookDemographicsChart.destroy();
            facebookDemographicsChart = new Chart(ctx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors,
                        borderWidth: 2,
                        borderColor: '#FFFFFF'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { usePointStyle: true, padding: 15 } }
                    }
                }
            });
        }
        
        // Initialize Content Performance Chart (copied from X dashboard)
        function initializeContentPerformanceChart() {
            const ctx = document.getElementById('contentPerformanceChart');
            if (!ctx) return;
            
            if (contentPerformanceChart) contentPerformanceChart.destroy();
            
            const weeks = ['Week 1', 'Week 2', 'Week 3', 'Week 4'];
            const engagementData = [4.2, 4.8, 4.5, 5.1];
            const postsData = [6, 7, 5, 8];
            
            contentPerformanceChart = new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: weeks,
                    datasets: [
                        {
                            label: 'Avg Engagement',
                            data: engagementData,
                            borderColor: '#3498DB',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Posts Published',
                            data: postsData,
                            borderColor: '#E67E22',
                            backgroundColor: 'rgba(230, 126, 34, 0.1)',
                            borderWidth: 3,
                            fill: false,
                            tension: 0.4,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: { usePointStyle: true }
                        }
                    },
                    scales: {
                        x: {
                            grid: { display: true, color: '#F3F4F6' }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: { display: true, text: 'Engagement Rate' },
                            grid: { color: '#F3F4F6' }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: { display: true, text: 'Posts Count' },
                            grid: { drawOnChartArea: false }
                        }
                    }
                }
            });
        }

        // Initialize Engagement Patterns Chart (copied from X dashboard)
        function initializeEngagementPatternsChart() {
            const ctx = document.getElementById('engagementPatternsChart');
            if (!ctx) return;
            
            if (engagementPatternsChart) engagementPatternsChart.destroy();
            
            const hours = ['6AM', '9AM', '12PM', '3PM', '6PM', '9PM'];
            const engagementRates = [15, 85, 45, 80, 35, 25];
            
            engagementPatternsChart = new Chart(ctx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: hours,
                    datasets: [{
                        label: 'Engagement Rate (%)',
                        data: engagementRates,
                        backgroundColor: [
                            '#FF6B35',
                            '#27AE60',
                            '#F39C12',
                            '#27AE60',
                            '#E67E22',
                            '#E74C3C'
                        ],
                        borderColor: [
                            '#E55A2B',
                            '#229954',
                            '#E67E22',
                            '#229954',
                            '#D68910',
                            '#C0392B'
                        ],
                        borderWidth: 2,
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#1F2937',
                            titleColor: '#FFFFFF',
                            bodyColor: '#FFFFFF',
                            callbacks: {
                                label: function(context) {
                                    return `Engagement: ${context.parsed.y}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: { display: false },
                            ticks: { font: { weight: 'bold' } }
                        },
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: { color: '#F3F4F6' },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Data for different ranges
        const facebookTrendsData = {
          '6m': {
            labels: ['Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            positive: [45, 44, 46, 47, 45, 45],
            neutral: [39, 40, 38, 37, 39, 39],
            negative: [16, 16, 16, 16, 16, 16]
          },
          '1y': {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            positive: [42, 43, 45, 44, 46, 47, 45, 44, 46, 47, 45, 45],
            neutral: [42, 41, 39, 40, 38, 37, 39, 40, 38, 37, 39, 39],
            negative: [16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16]
          },
          '2y': {
            labels: [
              'Jan 23', 'Feb 23', 'Mar 23', 'Apr 23', 'May 23', 'Jun 23',
              'Jul 23', 'Aug 23', 'Sep 23', 'Oct 23', 'Nov 23', 'Dec 23',
              'Jan 24', 'Feb 24', 'Mar 24', 'Apr 24', 'May 24', 'Jun 24',
              'Jul 24', 'Aug 24', 'Sep 24', 'Oct 24', 'Nov 24', 'Dec 24'
            ],
            positive: [41, 42, 43, 44, 45, 44, 46, 47, 45, 44, 46, 47, 45, 45, 46, 47, 45, 44, 46, 47, 45, 45, 46, 47],
            neutral: [43, 42, 41, 40, 39, 40, 38, 37, 39, 40, 38, 37, 39, 39, 38, 37, 39, 40, 38, 37, 39, 39, 38, 37],
            negative: [16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16]
          }
        };

        function initializeFacebookTrendsChart(range = '1y') {
          const ctx = document.getElementById('facebookTrendsChart');
          if (!ctx) return;

          const data = facebookTrendsData[range];

          if (facebookTrendsChart) facebookTrendsChart.destroy();
          facebookTrendsChart = new Chart(ctx.getContext('2d'), {
            type: 'line',
            data: {
              labels: data.labels,
              datasets: [
                {
                  label: 'Positive',
                  data: data.positive,
                  borderColor: '#27AE60',
                  backgroundColor: 'rgba(39, 174, 96, 0.1)',
                  borderWidth: 3,
                  fill: true,
                  tension: 0.4
                },
                {
                  label: 'Neutral',
                  data: data.neutral,
                  borderColor: '#F39C12',
                  backgroundColor: 'rgba(243, 156, 18, 0.1)',
                  borderWidth: 3,
                  fill: true,
                  tension: 0.4
                },
                {
                  label: 'Negative',
                  data: data.negative,
                  borderColor: '#E74C3C',
                  backgroundColor: 'rgba(231, 76, 60, 0.1)',
                  borderWidth: 3,
                  fill: true,
                  tension: 0.4
                }
              ]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: { legend: { display: false } },
              scales: {
                x: { grid: { display: true, color: '#F3F4F6' }, ticks: { font: { size: 12 } } },
                y: {
                  beginAtZero: true,
                  max: 100,
                  grid: { display: true, color: '#F3F4F6' },
                  ticks: { font: { size: 12 }, callback: function(value) { return value + '%'; } }
                }
              }
            }
          });
        }

        // Listen for slider changes (6m, 1y, 2y) with badge and endpoint highlight
        const sliderValueToRange = {
          0: '6m',
          1: '1y',
          2: '2y'
        };
        const sliderValueToLabel = {
          0: '6m',
          1: '1y',
          2: '2y'
        };
        // Map range to subtitle
        const rangeToSubtitle = {
          '6m': 'Facebook - Last 6 Months',
          '1y': 'Facebook - Last 12 Months',
          '2y': 'Facebook - Last 24 Months'
        };

        function updateTrendsSubtitle(rangeKey) {
          const subtitle = document.getElementById('facebookTrendsSubtitle');
          if (subtitle) {
            subtitle.textContent = rangeToSubtitle[rangeKey];
          }
        }

        function updateFacebookTrendsInsights(labels, positive, neutral, negative) {
            const insightsDiv = document.getElementById('facebookTrendsInsights');
            if (!insightsDiv) return;
            if (!labels.length) { insightsDiv.textContent = 'No data available for this range.'; return; }
            // Calculate averages
            const avgPos = (positive.reduce((a, b) => a + b, 0) / positive.length).toFixed(1);
            const avgNeu = (neutral.reduce((a, b) => a + b, 0) / neutral.length).toFixed(1);
            const avgNeg = (negative.reduce((a, b) => a + b, 0) / negative.length).toFixed(1);
            // Trend direction (compare first and last value)
            let trend = '';
            if (positive[positive.length-1] > positive[0] + 2) trend = '↗ Positive sentiment is increasing.';
            else if (positive[positive.length-1] < positive[0] - 2) trend = '↘ Positive sentiment is decreasing.';
            else trend = 'â†’ Positive sentiment is stable.';
            // Summary
            let summary = '';
            if (avgPos > avgNeu && avgPos > avgNeg) summary = `Positive sentiment dominates at ${avgPos}%.`;
            else if (avgNeg > avgPos && avgNeg > avgNeu) summary = `Negative sentiment is highest at ${avgNeg}%.`;
            else summary = `Neutral sentiment is most common at ${avgNeu}%.`;
            insightsDiv.innerHTML = `
                <strong>Key Insights (${labels.length} months):</strong><br/>
                <ul class="list-disc pl-6">
                    <li>Average Positive: <span class="font-semibold">${avgPos}%</span></li>
                    <li>Average Neutral: <span class="font-semibold">${avgNeu}%</span></li>
                    <li>Average Negative: <span class="font-semibold">${avgNeg}%</span></li>
                    <li>${trend}</li>
                    <li>${summary}</li>
                </ul>
            `;
        }

        document.addEventListener('DOMContentLoaded', function() {
          const trendRangeSlider = document.getElementById('trendRangeSlider');
          const sliderRangeBadge = document.getElementById('sliderRangeBadge');
          if (trendRangeSlider && sliderRangeBadge) {
            trendRangeSlider.addEventListener('input', function() {
              const label = sliderValueToLabel[this.value];
              sliderRangeBadge.textContent = label;
              const rangeKey = sliderValueToRange[this.value];
              initializeFacebookTrendsChart(rangeKey);
              updateTrendsSubtitle(rangeKey);
              // Highlight endpoints
              document.getElementById('sliderLabel6m').style.color = this.value == 0 ? '#ff7300' : '#6B7280';
              document.getElementById('sliderLabel2y').style.color = this.value == 2 ? '#ff7300' : '#6B7280';
              updateFacebookTrendsInsights(facebookTrendsData[rangeKey].labels, facebookTrendsData[rangeKey].positive, facebookTrendsData[rangeKey].neutral, facebookTrendsData[rangeKey].negative);
            });
            // Set initial badge, highlight, and subtitle
            sliderRangeBadge.textContent = sliderValueToLabel[trendRangeSlider.value];
            document.getElementById('sliderLabel6m').style.color = trendRangeSlider.value == 0 ? '#ff7300' : '#6B7280';
            document.getElementById('sliderLabel2y').style.color = trendRangeSlider.value == 2 ? '#ff7300' : '#6B7280';
            const initialRangeKey = sliderValueToRange[trendRangeSlider.value];
            initializeFacebookTrendsChart(initialRangeKey);
            updateTrendsSubtitle(initialRangeKey);
            updateFacebookTrendsInsights(facebookTrendsData[initialRangeKey].labels, facebookTrendsData[initialRangeKey].positive, facebookTrendsData[initialRangeKey].neutral, facebookTrendsData[initialRangeKey].negative);
          }
        });
        
        // Facebook Activity Radar Chart
        async function loadFacebookActivityRadarChart() {
            try {
                // Create dummy data for Facebook Activity Radar
                const dummyData = {
                    labels: ['Jan 2023', 'Feb 2023', 'Mar 2023', 'Apr 2023', 'May 2023', 'Jun 2023', 'Jul 2023', 'Aug 2023', 'Sep 2023', 'Oct 2023', 'Nov 2023', 'Dec 2023', 'Jan 2024', 'Feb 2024', 'Mar 2024', 'Apr 2024', 'May 2024', 'Jun 2024', 'Jul 2024', 'Aug 2024', 'Sep 2024', 'Oct 2024', 'Nov 2024', 'Dec 2024'],
                    values: [1850, 2100, 2350, 2200, 2450, 2300, 2650, 2800, 2550, 2750, 2900, 3100, 2950, 3200, 3350, 3150, 3450, 3300, 3700, 3850, 3650, 3800, 4000, 4150]
                };
                
                facebookActivityRadarRawData = dummyData;
                const yearSelect = document.getElementById('facebookRadarYearSelect');
                if (yearSelect) {
                    // Extract years from labels (format: 'Month YYYY')
                    const years = Array.from(new Set(dummyData.labels.map(label => label.split(' ')[1])));
                    yearSelect.innerHTML = '<option value="all">All Years</option>' + years.map(y => `<option value="${y}">${y}</option>`).join('');
                    yearSelect.onchange = function() { renderFacebookActivityRadarChart(this.value); };
                }
                renderFacebookActivityRadarChart('all');
            } catch (e) {
                const ctx = document.getElementById('facebookActivityRadarChart');
                if (ctx) {
                    ctx.parentNode.innerHTML = '<div class="text-center text-warning-700">Unable to load Facebook Activity Radar chart data.</div>';
                }
            }
        }
        
        function renderFacebookActivityRadarChart(selectedYear) {
            const ctx = document.getElementById('facebookActivityRadarChart');
            if (!ctx || !facebookActivityRadarRawData) return;
            if (facebookActivityRadarChart) facebookActivityRadarChart.destroy();
            
            let labels = facebookActivityRadarRawData.labels;
            let values = facebookActivityRadarRawData.values;
            if (selectedYear && selectedYear !== 'all') {
                labels = facebookActivityRadarRawData.labels.filter(l => l.endsWith(' ' + selectedYear));
                values = labels.map(l => {
                    const idx = facebookActivityRadarRawData.labels.indexOf(l);
                    return facebookActivityRadarRawData.values[idx];
                });
            }
            
            facebookActivityRadarChart = new Chart(ctx.getContext('2d'), {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Facebook Activity by Month',
                        data: values,
                        fill: true,
                        backgroundColor: 'rgba(66, 103, 178, 0.2)',
                        borderColor: '#4267B2',
                        pointBackgroundColor: '#4267B2',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#4267B2',
                        borderWidth: 3,
                        pointRadius: 6,
                        pointHoverRadius: 9
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                color: '#4267B2',
                                font: { weight: 'bold' }
                            }
                        },
                        tooltip: {
                            enabled: true,
                            backgroundColor: '#1F2937',
                            titleColor: '#FFFFFF',
                            bodyColor: '#FFFFFF',
                            borderColor: '#374151',
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.formattedValue} mentions`;
                                }
                            }
                        }
                    },
                    scales: {
                        r: {
                            angleLines: { color: '#E5E7EB' },
                            grid: { color: '#E5E7EB' },
                            pointLabels: { color: '#4267B2', font: { weight: 'bold' } },
                            ticks: { color: '#374151' }
                        }
                    },
                    animation: {
                        duration: 1200,
                        easing: 'easeInOutQuart'
                    },
                    interaction: {
                        intersect: false,
                        mode: 'nearest'
                    }
                }
            });
        }
        
        // New Platform Analysis Chart Functions
        function initializeFacebookPostingFrequencyChart() {
            const ctx = document.getElementById('facebookPostingFrequencyChart');
            if (!ctx) return;
            
            new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Daily Posts',
                        data: [1.8, 2.1, 3.2, 2.8, 2.5, 1.2, 1.0],
                        borderColor: '#3B82F6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y'
                    }, {
                        label: 'Engagement Rate (%)',
                        data: [4.2, 4.8, 5.5, 5.1, 4.9, 3.8, 3.2],
                        borderColor: '#10B981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Number of Posts'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Engagement Rate (%)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        }
                    }
                }
            });
        }
        
        function initializeFacebookContentTypeChart() {
            const ctx = document.getElementById('facebookContentTypeChart');
            if (!ctx) return;
            
            new Chart(ctx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['Video Posts', 'Image Posts', 'Text Posts', 'Link Posts'],
                    datasets: [{
                        data: [35, 28, 22, 15],
                        backgroundColor: [
                            '#EF4444',
                            '#F59E0B',
                            '#3B82F6',
                            '#8B5CF6'
                        ],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed + '%';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function initializeFacebookPlatformComparisonChart() {
            const ctx = document.getElementById('facebookPlatformComparisonChart');
            if (!ctx) return;
            
            const comparisonData = {
                engagement: {
                    labels: ['Facebook', 'X (Twitter)', 'Instagram', 'LinkedIn', 'Reddit'],
                    data: [4.8, 3.2, 6.1, 2.9, 5.4],
                    label: 'Engagement Rate (%)'
                },
                reach: {
                    labels: ['Facebook', 'X (Twitter)', 'Instagram', 'LinkedIn', 'Reddit'],
                    data: [1200000, 850000, 1800000, 620000, 750000],
                    label: 'Monthly Reach'
                },
                volume: {
                    labels: ['Facebook', 'X (Twitter)', 'Instagram', 'LinkedIn', 'Reddit'],
                    data: [125, 450, 210, 85, 320],
                    label: 'Monthly Posts'
                },
                sentiment: {
                    labels: ['Facebook', 'X (Twitter)', 'Instagram', 'LinkedIn', 'Reddit'],
                    data: [0.45, 0.32, 0.58, 0.41, 0.28],
                    label: 'Sentiment Score'
                }
            };
            
            let currentChart = null;
            
            function renderChart(metric) {
                if (currentChart) currentChart.destroy();
                
                const data = comparisonData[metric];
                currentChart = new Chart(ctx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: data.label,
                            data: data.data,
                            backgroundColor: [
                                '#4267B2', // Facebook
                                '#000000', // X
                                '#E4405F', // Instagram  
                                '#0077B5', // LinkedIn
                                '#FF4500'  // Reddit
                            ],
                            borderRadius: 8,
                            borderSkipped: false
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let value = context.parsed.y;
                                        if (metric === 'reach') {
                                            value = (value / 1000000).toFixed(1) + 'M';
                                        } else if (metric === 'sentiment') {
                                            value = (value * 100).toFixed(1) + '%';
                                        } else if (metric === 'engagement') {
                                            value = value.toFixed(1) + '%';
                                        }
                                        return data.label + ': ' + value;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: data.label
                                },
                                ticks: {
                                    callback: function(value) {
                                        if (metric === 'reach') {
                                            return (value / 1000000).toFixed(1) + 'M';
                                        } else if (metric === 'sentiment') {
                                            return (value * 100).toFixed(0) + '%';
                                        } else if (metric === 'engagement') {
                                            return value.toFixed(1) + '%';
                                        }
                                        return value;
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Initial render
            renderChart('engagement');
            
            // Handle metric selection change
            const select = document.getElementById('comparisonMetricSelect');
            if (select) {
                select.addEventListener('change', function() {
                    renderChart(this.value);
                });
            }
        }
        
        // Initialize all charts on page load
        window.addEventListener('DOMContentLoaded', function() {
            initializeContentPerformanceChart();
            initializeEngagementPatternsChart();
            initializeFacebookSentimentPieChart();
            initializeFacebookBarChart();
            initializeFacebookEngagementChart();
            initializeFacebookDemographicsChart();
            loadFacebookActivityRadarChart();
            initializeFacebookPostingFrequencyChart();
            initializeFacebookContentTypeChart();
            initializeFacebookPlatformComparisonChart();
            // initializeFacebookTrendsChart('1y'); // Now handled by slider logic
            
            // Initialize trends chart when trends tab is clicked
            // if (showTrends) { // showTrends is removed
            //     showTrends.addEventListener('click', function() {
            //         setTimeout(initializeFacebookTrendsChart, 100);
            //     });
            // }
        });
    </script>
    
    <style>
        .active-platform {
            box-shadow: 0 0 0 4px #ff7300, 0 4px 16px rgba(255, 115, 0, 0.25);
            border-radius: 12px;
            outline: none;
            z-index: 1;
            transition: box-shadow 0.2s;
        }
    </style>
    
    <script>
        // Highlight the active platform button
        document.addEventListener('DOMContentLoaded', function() {
            const platformBtns = document.querySelectorAll('.platform-btn');
            const currentPage = window.location.pathname.split('/').pop();
            platformBtns.forEach(btn => {
                const href = btn.getAttribute('href');
                if (href && href === currentPage) {
                    btn.classList.add('active-platform');
                }
            });
        });
    </script>

    <script>
        // Sidebar functionality
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar');
            const sidebarTrigger = document.getElementById('sidebarTrigger');
            const mainContent = document.getElementById('mainContent');
            let sidebarTimeout;
            
            function showSidebar() {
                sidebar.style.transform = 'translateX(0)';
                mainContent.style.marginLeft = '25%';
                clearTimeout(sidebarTimeout);
            }
            
            function hideSidebar() {
                sidebarTimeout = setTimeout(() => {
                    sidebar.style.transform = 'translateX(-100%)';
                    mainContent.style.marginLeft = '0';
                }, 300);
            }
            
            // Show sidebar on hover trigger
            sidebarTrigger.addEventListener('mouseenter', showSidebar);
            
            // Keep sidebar open when hovering over it
            sidebar.addEventListener('mouseenter', () => {
                clearTimeout(sidebarTimeout);
            });
            
            // Hide sidebar when leaving it
            sidebar.addEventListener('mouseleave', hideSidebar);
            
            // Date Filter Functionality
            const dateFromInput = document.getElementById('dateFrom');
            const dateToInput = document.getElementById('dateTo');
            const applyFilterBtn = document.getElementById('applyDateFilter');
            
            // Set default dates (current year)
            const currentDate = new Date();
            const currentYear = currentDate.getFullYear();
            const startOfYear = `${currentYear}-01-01`;
            const endOfYear = `${currentYear}-12-31`;
            
            dateFromInput.value = startOfYear;
            dateToInput.value = endOfYear;
            
            // Data sets for different date scenarios
            const dashboardData = {
                // Data when TO date is current date
                currentDate: {
                    reach: "1.8M",
                    reachChange: "+9.1% vs last month",
                    performance: "6.2%",
                    engagementChange: "+1.3% vs last month",
                    followers: "158.3K",
                    followersChange: "+18.7% vs last month",
                    likes: "142.1K",
                    likesChange: "+15.3% vs last month"
                },
                // Data for other dates
                historicalData: {
                    reach: "1.2M", 
                    reachChange: "+5.0% vs last month",
                    performance: "4.8%",
                    engagementChange: "+0.8% vs last month",
                    followers: "142.8K",
                    followersChange: "+12.5% vs last month",
                    likes: "125.4K",
                    likesChange: "+8.2% vs last month"
                }
            };

            // Update badge with clean styling and colored text (no background colors)
            function updateChangeBadge(elementId, changeText) {
                const el = document.getElementById(elementId);
                if (!el) return;
                const isNegative = /^\s*-/.test((changeText || '').trim());
                const textColor = isNegative ? 'text-red-600' : 'text-green-600';
                const preserveMargin = el.classList.contains('ml-2');
                let className = `text-xs font-medium flex items-center ${textColor}`;
                if (preserveMargin) className += ' ml-2';
                el.className = className;
                let svg = '';
                if (isNegative) {
                    svg = `<svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 10.293a1 1 0 00-1.414 0L11 14.586V3a1 1 0 10-2 0v11.586l-4.293-4.293a1 1 0 00-1.414 1.414l6 6a1 1 0 001.414 0l6-6a1 1 0 000-1.414z" clip-rule="evenodd"/></svg>`;
                } else {
                    svg = `<svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/></svg>`;
                }
                el.innerHTML = `${svg}${changeText}`;
            }
            
            // Function to get current date in YYYY-MM-DD format
            function getCurrentDateString() {
                const today = new Date();
                return today.toISOString().split('T')[0];
            }
            
            // Function to update dashboard data based on selected dates
            function updateDashboardData(fromDate, toDate) {
                const currentDateStr = getCurrentDateString();
                const isCurrentDate = (toDate === currentDateStr);
                
                // Select appropriate data set
                const data = isCurrentDate ? dashboardData.currentDate : dashboardData.historicalData;
                
                // Update the dashboard metrics with smooth transition
                updateMetricWithAnimation('reachValue', data.reach);
                updateMetricWithAnimation('performanceValue', data.performance);
                updateMetricWithAnimation('followersValue', data.followers);
                updateMetricWithAnimation('likesValue', data.likes);
                
                // Update change indicators with dynamic color
                updateChangeBadge('reachChange', data.reachChange);
                updateChangeBadge('engagementChange', data.engagementChange);
                updateChangeBadge('followersChange', data.followersChange);
                updateChangeBadge('likesChange', data.likesChange);
                
                // Show visual feedback for data update
                const metricsContainer = document.querySelector('.grid.grid-cols-1.md\\:grid-cols-4');
                if (metricsContainer) {
                    metricsContainer.style.opacity = '0.7';
                    setTimeout(() => {
                        metricsContainer.style.opacity = '1';
                    }, 300);
                }
                
                console.log(`Dashboard updated for date range: ${fromDate} to ${toDate} (Current date: ${isCurrentDate})`);
            }
            
            // Function to animate metric value changes
            function updateMetricWithAnimation(elementId, newValue) {
                const element = document.getElementById(elementId);
                if (element) {
                    element.style.transform = 'scale(1.1)';
                    element.style.transition = 'transform 0.3s ease';
                    
                    setTimeout(() => {
                        element.textContent = newValue;
                        element.style.transform = 'scale(1)';
                    }, 150);
                }
            }
            
            // Initialize with current data on page load
            window.addEventListener('load', function() {
                const savedToDate = localStorage.getItem('dateFilter_to');
                if (savedToDate) {
                    updateDashboardData(localStorage.getItem('dateFilter_from') || startOfYear, savedToDate);
                } else {
                    updateDashboardData(startOfYear, endOfYear);
                }
            });

            // Apply filter function
            function applyDateFilter() {
                const fromDate = dateFromInput.value;
                const toDate = dateToInput.value;
                
                if (!fromDate || !toDate) {
                    alert('Please select both FROM and TO dates');
                    return;
                }
                
                if (new Date(fromDate) > new Date(toDate)) {
                    alert('FROM date cannot be later than TO date');
                    return;
                }
                
                // Store selected dates in localStorage
                localStorage.setItem('dateFilter_from', fromDate);
                localStorage.setItem('dateFilter_to', toDate);
                
                // Update dashboard data based on selected dates
                updateDashboardData(fromDate, toDate);
                
                // Trigger storage event for real-time sync
                window.dispatchEvent(new StorageEvent('storage', {
                    key: 'dateFilter_from',
                    newValue: fromDate
                }));
                
                // Show loading state
                applyFilterBtn.innerHTML = `
                    <svg class="w-4 h-4 mr-2 animate-spin" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2v4l4-4h4v4l-4 4h4v4l-4-4v4h-4l4-4H8l4 4H8v-4l4 4V8L8 4h4V2z"/>
                    </svg>
                    Applying...
                `;
                applyFilterBtn.disabled = true;
                
                setTimeout(() => {
                    applyFilterBtn.innerHTML = `
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        Apply
                    `;
                    applyFilterBtn.disabled = false;
                    
                    // Show success feedback
                    const originalText = applyFilterBtn.innerHTML;
                    applyFilterBtn.innerHTML = `
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        Applied!
                    `;
                    applyFilterBtn.classList.remove('bg-primary', 'hover:bg-primary-600');
                    applyFilterBtn.classList.add('bg-success-500', 'hover:bg-success-600');
                    
                    setTimeout(() => {
                        applyFilterBtn.innerHTML = originalText;
                        applyFilterBtn.classList.remove('bg-success-500', 'hover:bg-success-600');
                        applyFilterBtn.classList.add('bg-primary', 'hover:bg-primary-600');
                    }, 1500);
                    
                    console.log(`Date filter applied: ${fromDate} to ${toDate}`);
                }, 1000);
            }
            
            // Load saved dates function
            function loadSavedDates() {
                const savedFromDate = localStorage.getItem('dateFilter_from');
                const savedToDate = localStorage.getItem('dateFilter_to');
                
                if (savedFromDate && savedToDate) {
                    dateFromInput.value = savedFromDate;
                    dateToInput.value = savedToDate;
                }
            }
            
            // Event listeners
            applyFilterBtn.addEventListener('click', applyDateFilter);
            
            // Listen for storage changes from other tabs/windows
            window.addEventListener('storage', function(e) {
                if (e.key === 'dateFilter_from' || e.key === 'dateFilter_to') {
                    loadSavedDates();
                }
            });
            
            // Load saved filter dates on page load
            loadSavedDates();
        });
    </script>
</body>
</html>


